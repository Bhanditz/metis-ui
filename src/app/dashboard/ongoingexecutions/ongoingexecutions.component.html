<div class="ongoing-executions" *ngIf="ongoingExecutions && ongoingExecutions.length > 0">
	<h3>{{ 'ongoingexecutions' | translate }}</h3>
  <div class="messages">
    <div class="error-message" *ngIf="errorMessage">{{errorMessage}}</div>
  </div>    
  <div class="latest-ongoing" *ngFor="let ongoing of ongoingExecutions;">
    <div class="status">
      <strong>{{ongoing.metisPlugins[ongoing.currentPlugin].pluginType}}</strong>
      {{ongoing.cancelling ? cancelling : ongoing.metisPlugins[ongoing.currentPlugin].pluginStatus}}
    </div>
    <div class="progress">
      <span>{{ongoing.datasetId}}</span> <a [routerLink]="['/dataset', 'edit', ongoing.datasetId]" class="workflowname">{{ongoing.datasetName}}</a>
      <div class="progress-status">
        <span class="progress-statusnumbers">{{ 'overallprogress' | translate }}</span>
        <span class="progress-percentage">{{ 'step' | translate }} {{ongoing.currentPlugin}}/{{ongoing.metisPlugins.length}}</span>
      </div>
      <div class="progressbar">
        <div class="progressbar-done" [style.width.%]="ongoing.currentPlugin / ongoing.metisPlugins.length * 100 >= 0 ? ongoing.currentPlugin / ongoing.metisPlugins.length * 100 : 0"></div>
      </div>
    </div>
    <div class="datetime">
      <span class="date">{{ongoing.startedDate | date:'dd/MM/yyyy'}}</span> 
      <span class="time">{{ongoing.startedDate | date:'HH:mm'}}</span>
    </div>
    <nav>
      <ul>
        <li *ngIf="!ongoing.cancelling && ongoing.metisPlugins[ongoing.currentPlugin].pluginType !== 'PREVIEW' && ongoing.metisPlugins[ongoing.currentPlugin].pluginType !== 'PUBLISH' && ongoing.metisPlugins[ongoing.currentPlugin].pluginType !== 'MEDIA_PROCESS'">
          <a class="cancel-btn svg-icon-cancel tooltip" attr.data-tooltip="{{ 'cancel' | translate }}" (click)="cancelWorkflow(ongoing.id)"></a>
        </li>
        <li *ngIf="ongoing.workflowStatus !== 'INQUEUE'">
          <a class="log-btn svg-icon-log tooltip" attr.data-tooltip="{{ 'log' | translate }}" (click)="showLog(ongoing.metisPlugins[ongoing.currentPlugin].externalTaskId, ongoing.metisPlugins[ongoing.currentPlugin].topologyName, ongoing.metisPlugins[ongoing.currentPlugin].pluginType, ongoing.datasetId)"></a>
        </li>
        <li><a [routerLink]="['/dataset', 'log', ongoing.datasetId]" class="log-btn svg-icon-history tooltip" attr.data-tooltip="{{ 'history' | translate }}"></a></li>
      </ul>
    </nav>
  </div>
  <div class="loadmore" *ngIf="viewMore">
    <a class="load-more-btn" (click)="viewAll();">{{ 'viewall' | translate }}</a>
  </div>
</div>
