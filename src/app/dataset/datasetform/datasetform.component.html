<div class="metis-form metis-form-horizontal">
  <form [formGroup]="datasetForm" #formDir="ngForm">
    <div class="messages">
      <div class="error-message" *ngIf="errorMessage"><i class="fa fa-times"></i>{{errorMessage}}</div>
      <div class="success-message" *ngIf="successMessage">{{successMessage}}</div>
    </div>
    <div class="form-fields">
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="identifier">Identifier</label>
        <input id="identifier" type="text" formControlName="identifier" />
      </div>
      <div class="form-group">
        <label for="dataset-name">Dataset Name *</label>
        <input id="dataset-name" type="text" formControlName="datasetName" pattern="[a-zA-Z0-9]+" />
        <div class="messages" *ngIf="formMode === 'update'" [hidden]="datasetForm.controls.datasetName.valid">
          <div class="error-message">Only A to Z and numbers are allowed.</div>
        </div>
      </div>

      <div class="form-group">
        <label for="data-provider">Data provider</label>
        <input id="data-provider" type="text" formControlName="dataProvider" />
      </div>
      <div class="form-group">
        <label for="provider">Provider *</label>
        <input id="provider" type="text" formControlName="provider" />
      </div>
      <div class="form-group">
        <label for="intermediate-provider">Intermediate Provider</label>
        <input id="intermediate-provider" type="text" formControlName="intermediateProvider" />
      </div>

      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="date-created">Date created</label>
        <input id="date-created" type="text" formControlName="dateCreated" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="date-updated">Date updated</label>
        <input id="date-updated" type="text" formControlName="dateUpdated" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="status">Status *</label>
        <input id="status" type="text" formControlName="status" />
      </div>

      <div class="form-group">
        <label for="replaces">Replaces</label>
        <div class="metis-autocomplete">
          <input id="replaces" formControlName="replaces" (keyup)=searchDataset($event); />
          <ul *ngIf="datasetOptions && autosuggestId ==='replaces'">
            <li (click)=selectDataset(dataset.name); *ngFor="let dataset of datasetOptions">{{dataset.name}}</li>
          </ul>
        </div>    
      </div>
      <div class="form-group">
        <label for="replaced-by">Replaced by</label>
        <div class="metis-autocomplete">
          <input id="replaced-by" formControlName="replacedBy" (keyup)=searchDataset($event); />
          <ul *ngIf="datasetOptions && autosuggestId ==='replaced-by'">
            <li (click)=selectDataset(dataset.name); *ngFor="let dataset of datasetOptions">{{dataset.name}}</li>
          </ul>
        </div> 
      </div>
      <div class="form-group">
        <label for="country">Country</label>
        <input id="country" type="text" formControlName="country" />
        <!--<select id="country" formControlName="country" >
          <option *ngFor="let country of countryOptions" [value]="country">{{country}}</option>
        </select>-->
      </div>
       <div class="form-group">
        <label for="language">Language</label>
        <input id="language" type="text" formControlName="language" />
        <!--<select id="language" formControlName="language" >
          <option *ngFor="let language of languageOptions" [value]="language">{{language}}
        </select>-->
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" formControlName="description"></textarea>
      </div>
      <div class="form-group">
        <label for="notes">Notes</label>
        <textarea id="notes" formControlName="notes"></textarea>
      </div>

      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="created-by">Created by</label>
        <input id="created-by" type="text" formControlName="createdBy" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="first-published">First published</label>
        <input id="first-published" formControlName="firstPublished" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="last-published">Last published</label>
        <input id="last-published" type="text" formControlName="lastPublished" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="number-published">Number of items published</label>
        <input id="number-published" type="text" formControlName="numberOfItemsPublished" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="last-date-harvest">Last date of harvest</label>
        <input id="last-date-harvest" type="text" formControlName="lastDateHarvest"  />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="number-items-harvested">Number of items harvested</label>
        <input id="number-items-harvested" type="text" formControlName="numberOfItemsHarvested" />
      </div>

      <div class="form-group">
        <label>Harvest protocol</label>
        <div class="form-group-radios">
          <div>
            <label>
              <input type="radio" formControlName="pluginType" value="http" [(ngModel)]="harvestprotocol" [checked]="datasetData && harvestprotocol === 'http' ? true : false" />
              HTTP
            </label>
          </div>          
          <div>
            <label>
              <input type="radio" formControlName="pluginType" value="OAIPMH_HARVEST" [(ngModel)]="harvestprotocol" [checked]="datasetData && harvestprotocol === 'OAIPMH_HARVEST' ? true : false" /> OAI-PMH
            </label>
          </div>          
        </div>
      </div>

      <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
        <label for="harvest-url">Harvest URL</label>
        <input id="harvest-url" type="text" formControlName="harvestUrl"/>
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
        <label for="setspec">Setspec</label>
        <input id="setspec" type="tel" formControlName="setSpec" />
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
        <label for="metadata-format">Metadata format</label>
        <input id="metadata-format" type="text" formControlName="metadataFormat" />
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'http'">
        <label for="record-xpath">Record XPath</label>
        <input id="record-xpath" type="text" formControlName="recordXPath" />
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'http'">
        <label for="ftphttpuser">FTP/HTTP user</label>
        <input id="ftphttpuser" type="text" formControlName="ftpHttpUser" />
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'http'">
        <label for="ftphttppassword">FTP/HTTP password</label>
        <input id="ftphttppassword" type="text" formControlName="ftpHttpPassword" />
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'http'">
        <label for="url">URL</label>
        <input id="url" type="text" formControlName="url" />
      </div>

      <div class="form-group form-group-btns user-profile-edit-btns">
        <button class="submit" type="button" *ngIf="formMode !== 'read'" [disabled]="!datasetForm.valid" (click)="onSubmit()">Submit</button>
        <button class="submit" type="button" *ngIf="formMode === 'read'" (click)="updateForm()">Update</button>
      </div>
    </div>
  </form>
</div>
