<div class="metis-form metis-form-horizontal">
  <form [formGroup]="datasetForm" #formDir="ngForm">
    <div class="messages">
      <div class="error-message" *ngIf="errorMessage">{{errorMessage}}</div>
      <div class="success-message" *ngIf="successMessage">{{successMessage}}</div>
    </div>
    <div class="form-fields">
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="identifier">{{ 'identifier' | translate }}</label>
        <input id="identifier" type="text" formControlName="datasetId" [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group">
        <label for="dataset-name">{{ 'datasetname' | translate }} *</label>
        <input id="dataset-name" type="text" formControlName="datasetName" pattern="[a-zA-Z0-9]+" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
        <div class="messages" *ngIf="formMode === 'update'" [hidden]="datasetForm.controls.datasetName.valid">
          <div class="error-message">Only A to Z and numbers are allowed.</div>
        </div>
      </div>

      <div class="form-group">
        <label for="data-provider">{{ 'dataprovider' | translate }}</label>
        <input id="data-provider" type="text" formControlName="dataProvider" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group">
        <label for="provider">{{ 'provider' | translate }} *</label>
        <input id="provider" type="text" formControlName="provider" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group">
        <label for="intermediate-provider">{{ 'intermediateprovider' | translate }}</label>
        <input id="intermediate-provider" type="text" formControlName="intermediateProvider" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>

      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="date-created">{{ 'datecreated' | translate }}</label>
        <input id="date-created" type="text" formControlName="dateCreated" [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="date-updated">{{ 'dateupdated' | translate }}</label>
        <input id="date-updated" type="text" formControlName="dateUpdated" [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="status">{{ 'status' | translate }} *</label>
        <input id="status" type="text" formControlName="status" [readonly]="true" (blur)="saveTempData()"/>
      </div>

      <div class="form-group">
        <label for="replaces">{{ 'replaces' | translate }}</label>
        <input id="replaces" formControlName="replaces" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>   
      </div>
      <div class="form-group">
        <label for="replaced-by">{{ 'replacedby' | translate }}</label>
        <input id="replaced-by" formControlName="replacedBy" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group">
        <label for="country">{{ 'country' | translate }}</label>
        <select id="country" formControlName="country" [ngModel]="selectedCountry" (blur)="saveTempData()"> 
          <option *ngFor="let c of countryOptions" [ngValue]="c">{{c.name}}</option> 
        </select>
      </div>
       <div class="form-group">
        <label for="language">{{ 'language' | translate }}</label>
        <select id="language" formControlName="language" [ngModel]="selectedLanguage" (blur)="saveTempData()">
          <option *ngFor="let l of languageOptions" [ngValue]="l">{{l.name}}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="description">{{ 'description' | translate }}</label>
        <textarea id="description" formControlName="description" (blur)="saveTempData()"></textarea>
      </div>
      <div class="form-group">
        <label for="notes">{{ 'notes' | translate }}</label>
        <textarea id="notes" formControlName="notes" (blur)="saveTempData()"></textarea>
      </div>

      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="created-by">{{ 'createdby' | translate }}</label>
        <input id="created-by" type="text" formControlName="createdBy" [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="first-published">{{ 'firstpublished' | translate }}</label>
        <input id="first-published" formControlName="firstPublished" [readonly]="true" (blur)="saveTempData()" />
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="last-published">{{ 'lastpublished' | translate }}</label>
        <input id="last-published" type="text" formControlName="lastPublished" [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="number-published">{{ 'numberpublished' | translate }}</label>
        <input id="number-published" type="text" formControlName="numberOfItemsPublished" [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="last-date-harvest">{{ 'lastharvest' | translate }}</label>
        <input id="last-date-harvest" type="text" formControlName="lastDateHarvest"  [readonly]="true" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="formMode !== 'create'">
        <label for="number-items-harvested">{{ 'numberharvested' | translate }}</label>
        <input id="number-items-harvested" type="text" formControlName="numberOfItemsHarvested" [readonly]="true" (blur)="saveTempData()"/>
      </div>

      <div class="form-group">
        <label>{{ 'harvestprotocol' | translate }} *</label>
        <div class="form-group-radios">
          <div>
            <label>
              <input type="radio" [readonly]="formMode === 'read' ? true : false" formControlName="pluginType" value="HTTP_HARVEST" [(ngModel)]="harvestprotocol" [checked]="datasetData && harvestprotocol === 'HTTP_HARVEST' ? true : false" (change)="saveTempData()" />
              {{ 'http' | translate }}
            </label>
          </div>          
          <div>
            <label>
              <input type="radio" [readonly]="formMode === 'read' ? true : false" formControlName="pluginType" value="OAIPMH_HARVEST" [(ngModel)]="harvestprotocol" [checked]="datasetData && harvestprotocol === 'OAIPMH_HARVEST' ? true : false" (change)="saveTempData()"/> {{ 'oai' | translate }}
            </label>
          </div>          
        </div>
      </div>

      <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
        <label for="harvest-url">{{ 'harvesturl' | translate }} *</label>
        <input id="harvest-url" type="text" formControlName="harvestUrl" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
        <label for="setspec">{{ 'setspec' | translate }}</label>
        <input id="setspec" type="tel" formControlName="setSpec" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()" />
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
        <label for="metadata-format">{{ 'metadataformat' | translate }} *</label>
        <input id="metadata-format" type="text" formControlName="metadataFormat" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'HTTP_HARVEST'">
        <label for="record-xpath">{{ 'recordxpath' | translate }}</label>
        <input id="record-xpath" type="text" formControlName="recordXPath" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'HTTP_HARVEST'">
        <label for="ftphttpuser">{{ 'ftpuser' | translate }}</label>
        <input id="ftphttpuser" type="text" formControlName="ftpHttpUser" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'HTTP_HARVEST'">
        <label for="ftphttppassword">{{ 'ftppassword' | translate }}</label>
        <input id="ftphttppassword" type="text" formControlName="ftpHttpPassword" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>
      <div class="form-group" *ngIf="harvestprotocol === 'HTTP_HARVEST'">
        <label for="url">{{ 'url' | translate }}</label>
        <input id="url" type="text" formControlName="url" [readonly]="formMode === 'read' ? true : false" (blur)="saveTempData()"/>
      </div>

      <div class="form-group form-group-btns user-profile-edit-btns">
        <button class="submit" type="button" *ngIf="formMode !== 'read'" [disabled]="!datasetForm.valid" (click)="onSubmit()">{{ 'submit' | translate }}</button>
        <button class="submit" type="button" *ngIf="formMode === 'read'" (click)="updateForm()">{{ 'update' | translate }}</button>
      </div>
    </div>
  </form>
</div>
