<div class="dashboard-wrapper">

  <div class="messages">
    <div class="error-message" *ngIf="errorMessage"><i class="fa fa-times"></i>{{errorMessage}}</div>
    <div class="success-message" *ngIf="successMessage">{{successMessage}}</div>
  </div>
  
  <div class="collapse-block" *ngIf="dataset">

    <div class="dataset-name">
      {{dataset.name}}
    </div>
    <div class="collapse-toggle-block">
      <div class="dataset-collapse-toggle" (click)="isCollapsed = isCollapsed ? false : true">
        <span class="info-toggle">
          Expand info
        </span>
      </div>
    </div>

    <hr/>

    <div class="dataset-collapse-blocks metis-dashboard" *ngIf="isCollapsed">
      <div class="metis-dashboard-left">
        
        <app-generalinfo></app-generalinfo>

      </div>
      <div class="metis-dashboard-right">       

        <app-actionbar [isShowingLog]="isShowingLog" [dataset]="dataset" (notifyShowLogStatus)="onNotifyShowLogStatus($event)"></app-actionbar>
        <app-history [dataset]="dataset" [inCollapsablePanel]=true [activeSet]="activeSet"></app-history>

        <app-datasetlog *ngIf="isShowingLog" [isShowingLog]="isShowingLog" (notifyShowLogStatus)="onNotifyShowLogStatus($event)"></app-datasetlog>

      </div>
    </div>
  </div>

  <div class="metis-dashboard">
    <ul class="tabs">
      <li [ngClass]="{'active': activeTab === 'new' }">
        <a routerLink="/dataset/new/{{activeSet}}">
          <span class="tab-title">Dataset Information</span>
          <span class="tab-subtitle">last action</span>
          <span class="tab-subtitle tab-date">23/06/2017</span>
        </a>
      </li>
      <li [ngClass]="{'active': activeTab === 'mapping' }">
        <a routerLink="/dataset/mapping/{{activeSet}}">
          <span class="tab-title">Mapping</span>
        </a>
      </li>
      <li [ngClass]="{'active': activeTab === 'log' }">
        <a routerLink="/dataset/log/{{activeSet}}">
          <span class="tab-title">Processing History</span>
          <span class="tab-subtitle">last modified</span>
          <span class="tab-subtitle tab-date">11/03/2017</span>
        </a>
      </li>
      <li [ngClass]="{'active': activeTab === 'preview' }">
        <a routerLink="/dataset/preview/{{activeSet}}">
          <span class="tab-title">Preview</span>
        </a>
      </li>
       <li [ngClass]="{'active': activeTab === 'dataquality' }">
        <a routerLink="/dataset/dataquality/{{activeSet}}">
          <span class="tab-title">Data Quality Assurance</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="tab-content">
    <ng-template dataset-host></ng-template>
  </div>
</div>
