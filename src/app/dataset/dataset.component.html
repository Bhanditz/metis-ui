<div class="dashboard-wrapper">

  <div class="messages">
    <div class="error-message" *ngIf="errorMessage"><i class="fa fa-times"></i>{{errorMessage}}</div>
    <div class="success-message" *ngIf="successMessage">{{successMessage}}</div>
  </div>
  
  <div class="collapse-block" *ngIf="datasetData">

    <div class="dataset-name">
      {{datasetData.datasetName}}
    </div>
    <div class="collapse-toggle-block">
      <div class="dataset-collapse-toggle" (click)="isCollapsed = isCollapsed ? false : true">
        <span class="info-toggle">
          Expand info
        </span>
      </div>
    </div>

    <hr/>

    <div class="dataset-collapse-blocks metis-dashboard" *ngIf="isCollapsed">
      <div class="metis-dashboard-left">        
        <app-generalinfo [datasetData]="datasetData"></app-generalinfo>
      </div>
      <div class="metis-dashboard-right">  
        <app-actionbar [isShowingLog]="isShowingLog" [datasetData]="datasetData" (notifyShowLogStatus)="onNotifyShowLogStatus($event)"></app-actionbar>
        <app-history [datasetData]="datasetData" [inCollapsablePanel]=true ></app-history>
        <app-datasetlog *ngIf="isShowingLog" [isShowingLog]="isShowingLog" (notifyShowLogStatus)="onNotifyShowLogStatus($event)"></app-datasetlog>
      </div>
    </div>
  </div>

  <div class="metis-dashboard">
    <ul class="tabs">     
      <li [ngClass]="{'active': activeTab === 'new' }">
        <a routerLink="/dataset/new/{{activeSet}}">
          <span class="tab-title">Dataset Information</span>
          <span class="tab-subtitle" *ngIf="datasetData">last action</span>
          <span class="tab-subtitle tab-date" *ngIf="datasetData">{{datasetData.updatedDate | date:'dd/MM/yyyy - HH:mm'}}</span>
        </a>
      </li>
      <li [ngClass]="{'active': activeTab === 'mapping' }">
        <a routerLink="/dataset/mapping/{{activeSet}}">
          <span class="tab-title">Mapping</span>
        </a>
      </li>
      <li [ngClass]="{'active': activeTab === 'log' }">
        <a routerLink="/dataset/log/{{activeSet}}">
          <span class="tab-title">Processing History</span>
          <span class="tab-subtitle">last modified</span>
          <span class="tab-subtitle tab-date">11/03/2017</span>
        </a>
      </li>
      <li [ngClass]="{'active': activeTab === 'preview' }">
        <a routerLink="/dataset/preview/{{activeSet}}">
          <span class="tab-title">Preview</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="tab-content">
    <ng-template dataset-host></ng-template>
  </div>
</div>
