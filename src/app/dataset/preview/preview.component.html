<div class="messages">
  <div class="error-message" *ngIf="errorMessage">{{errorMessage}}</div>
</div>

<div class="filter-wrapper">
  <ul class="filter" (clickOutside)="onClickedOutside($event)">    
    <li class="dropdown dropdown-date" *ngIf="allWorkflowDates && allWorkflowDates.length > 0">
      <a (click)="toggleFilterDate()">{{ 'datestarted' | translate }}<span *ngIf=selectedDate>: {{selectedDate | date:'dd/MM/yyyy - HH:mm'}}</span></a>
      <div *ngIf="filterDate" class="dropdown-wrapper">
        <ul>
          <li *ngFor="let w of allWorkflowDates;"><a (click)="addPluginFilter(w)">{{w.startedDate | date:'dd/MM/yyyy - HH:mm'}}</a></li>
        </ul>
      </div>
    </li>
    <li class="dropdown dropdown-plugin" *ngIf="allPlugins && allPlugins.length > 0">
      <a (click)="toggleFilterPlugin()">{{ 'plugin' | translate }}<span *ngIf=selectedPlugin>: {{selectedPlugin}}</span></a>
      <div *ngIf="filterPlugin" class="dropdown-wrapper">
        <ul>
          <li *ngFor="let w of allPlugins;"><a (click)="getXMLSamples(w)">{{w}}</a></li>
        </ul>
      </div>
    </li>
  </ul>
  <span *ngIf="loadingSamples" class="svg-icon-spin"></span>
</div>

<div class="view-sample" *ngFor="let sample of allSamples; let i = index;" [ngClass]="{'view-sample-expanded': expandedSample===i}">
  <div class="view-sample-title">
    <h3>{{sample.ecloudId}} <span *ngIf="selectedPlugin">{{selectedPlugin}}</span></h3>
    <div class="toggle-expand" *ngIf="expandedSample === i && allSamples.length !== i"> 
      <a (click)="expandSample(i)">-</a>
    </div>
  </div>
  <div class="view-sample-editor">
    <codemirror [ngModel]="sample.xmlRecord | beautifyXML" (ngModelChange)="sample.xmlRecord=$event" [config]="editorConfig"></codemirror>
    <a class="load-more-btn" (click)="expandSample(i)" *ngIf="expandedSample !== i">expand</a>
  </div>
</div>

<div class="view-sample" *ngIf="allSamples.length === 0">
  <div class="view-sample-title">
    <h3>{{nosample}}</h3>
  </div>
  <div class="view-sample-editor" *ngIf="nosample">
    <codemirror [ngModel]="nosample | beautifyXML" (ngModelChange)="nosample" [config]="editorConfig"></codemirror>
  </div>
</div>
