<div class="metis-form metis-form-horizontal">

  <form [formGroup]="workflowForm" #formDir="ngForm">
      
    <div class="messages" (clickOutside)="onClickedOutside()">
      <div class="error-message" *ngIf="errorMessage">{{errorMessage}}</div>
      <div class="success-message" *ngIf="successMessage">{{successMessage}}</div>
    </div>

    <div class="predefined-workflows">
      <ul class="predefined-workflows-tabs">
        <li class="active">{{ 'currentworkflow' | translate }}</li>
      </ul>
      <ul class="predefined-steps">
        <li [ngClass]="{'inactive': workflowForm.get('pluginHARVEST').value === false || workflowForm.get('pluginHARVEST').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="import">{{ 'HARVEST' | renameWorkflow }}</a></li>
        <li [ngClass]="{'inactive': workflowForm.get('pluginVALIDATION_EXTERNAL').value === false || workflowForm.get('pluginVALIDATION_EXTERNAL').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="validate-external">{{ 'VALIDATION_EXTERNAL' | renameWorkflow }}</a>
        </li>
        <li [ngClass]="{'inactive': workflowForm.get('pluginTRANSFORMATION').value === false || workflowForm.get('pluginTRANSFORMATION').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="transform">{{ 'TRANSFORMATION' | renameWorkflow }}</a>
        </li>
        <li [ngClass]="{'inactive': workflowForm.get('pluginVALIDATION_INTERNAL').value === false || workflowForm.get('pluginVALIDATION_INTERNAL').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="validate-internal">{{ 'VALIDATION_INTERNAL' | renameWorkflow }}</a>
        </li>
        <li [ngClass]="{'inactive': workflowForm.get('pluginNORMALIZATION').value === false || workflowForm.get('pluginNORMALIZATION').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="normalise">{{ 'NORMALIZATION' | renameWorkflow }}</a>
        </li>
        <li [ngClass]="{'inactive': workflowForm.get('pluginENRICHMENT').value === false || workflowForm.get('pluginENRICHMENT').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="enrich">{{ 'ENRICHMENT' | renameWorkflow }}</a>
        </li>
        <li [ngClass]="{'inactive': workflowForm.get('pluginMEDIA_PROCESS').value === false || workflowForm.get('pluginMEDIA_PROCESS').value === ''}">
          <a [routerLink]="[currentUrl]" fragment="media">{{ 'MEDIA_PROCESS' | renameWorkflow }}</a>
        </li>
        <li class="inactive">
          <a [routerLink]="[currentUrl]" fragment="preview">{{ 'PREVIEW' | renameWorkflow }}</a>
        </li>
        <li class="inactive">
          <a [routerLink]="[currentUrl]" fragment="publish">{{ 'PUBLISH' | renameWorkflow }}</a>
        </li>
        <li class="inactive">
          <a [routerLink]="[currentUrl]" fragment="linkchecking">{{ 'LINK_CHECKING' | renameWorkflow }}</a>
        </li>
      </ul>
    </div>

    <div class="form-fields-container">
      <!-- IMPORT / HARVEST -->
      <div id="import" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginHARVEST').value === false || workflowForm.get('pluginHARVEST').value === ''}">      
        <label for="pluginImport" class="plugin">{{ 'HARVEST' | renameWorkflow }} <input type="checkbox" formControlName="pluginHARVEST" id="pluginImport" /></label>    
        <div class="form-group">
          <label>{{ 'harvestprotocol' | translate }} *</label>
          <div class="form-group-radios">
            <div>
              <label>
                <input type="radio" formControlName="pluginType" value="OAIPMH_HARVEST" [(ngModel)]="harvestprotocol" [checked]="harvestprotocol === 'OAIPMH_HARVEST' ? true : false" /> {{ 'oai' | translate }}
              </label>
            </div>   
            <div>
              <label>
                <input type="radio" formControlName="pluginType" value="HTTP_HARVEST" [(ngModel)]="harvestprotocol" [checked]="harvestprotocol === 'HTTP_HARVEST' ? true : false" />
                {{ 'http' | translate }}
              </label>
            </div>          
          </div>
        </div>
        <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
          <label for="harvest-url">{{ 'harvesturl' | translate }} *</label>
          <input id="harvest-url" type="text" formControlName="harvestUrl" />
        </div>
        <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
          <label for="setspec">{{ 'setspec' | translate }}</label>
          <input id="setspec" type="tel" formControlName="setSpec" />
        </div>
        <div class="form-group" *ngIf="harvestprotocol === 'OAIPMH_HARVEST'">
          <label for="metadata-format">{{ 'metadataformat' | translate }} *</label>
          <input id="metadata-format" type="text" formControlName="metadataFormat" />
        </div>      
        <div class="form-group" *ngIf="harvestprotocol === 'HTTP_HARVEST'">
          <label for="url">{{ 'url' | translate }} *</label>
          <input id="url" type="text" formControlName="url" />
        </div>
      </div>

      <!-- VALIDATION -->
      <div id="validate-external" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginVALIDATION_EXTERNAL').value === false || workflowForm.get('pluginVALIDATION_EXTERNAL').value === ''}"> 
        <label for="pluginValidateExternal" class="plugin">{{ 'VALIDATION_EXTERNAL' | renameWorkflow }}<input type="checkbox" formControlName="pluginVALIDATION_EXTERNAL" id="pluginValidateExternal" /></label>
      </div>

      <!-- TRANSFORMATION -->
      <div id="transform" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginTRANSFORMATION').value === false || workflowForm.get('pluginTRANSFORMATION').value === ''}"> 
        <label for="pluginTransform" class="plugin">{{ 'TRANSFORMATION' | renameWorkflow }} <input type="checkbox" formControlName="pluginTRANSFORMATION" id="pluginTransform" /></label>
        <div class="form-group form-group-checkbox">
          <label for="customxslt">{{ 'customxslt' | translate }}</label>
          <input id="customxslt" type="checkbox" formControlName="customxslt" />
        </div>
      </div>

      <!-- VALIDATION -->
      <div id="validate-internal" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginVALIDATION_INTERNAL').value === false || workflowForm.get('pluginVALIDATION_INTERNAL').value === ''}"> 
        <label for="pluginValidateInternal" class="plugin">{{ 'VALIDATION_INTERNAL' | renameWorkflow }}<input type="checkbox" formControlName="pluginVALIDATION_INTERNAL" id="pluginValidateInternal" /></label>
      </div>

       <!-- NORMALIZATION -->
      <div id="normalise" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginNORMALIZATION').value === false || workflowForm.get('pluginNORMALIZATION').value === ''}"> 
        <label for="pluginNORMALIZATION" class="plugin">{{ 'NORMALIZATION' | renameWorkflow }}<input type="checkbox" formControlName="pluginNORMALIZATION" id="pluginNORMALIZATION" /></label>
      </div>

      <!-- ENRICHMENT -->
      <div id="enrich" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginENRICHMENT').value === false || workflowForm.get('pluginENRICHMENT').value === ''}"> 
        <label for="pluginEnrichment" class="plugin">{{ 'ENRICHMENT' | renameWorkflow }} <input type="checkbox" formControlName="pluginENRICHMENT" id="pluginEnrichment" /></label>
      </div>

      <!-- MEDIA SERVICE -->
      <div id="media" class="form-fields" [ngClass]="{'inactive': workflowForm.get('pluginMEDIA_PROCESS').value === false || workflowForm.get('pluginMEDIA_PROCESS').value === ''}"> 
        <label for="pluginMEDIA_PROCESS" class="plugin">{{ 'MEDIA_PROCESS' | renameWorkflow }} <input type="checkbox" formControlName="pluginMEDIA_PROCESS" id="pluginMEDIA_PROCESS" /></label>
      </div>

      <!-- PUBLISH TO PREVIEW -->
      <div id="preview" class="form-fields inactive"> 
        <label for="" class="plugin">{{ 'PREVIEW' | renameWorkflow }} <input type="checkbox" /></label>
      </div>

      <!-- PUBLISH TO PUBLISH -->
      <div id="publish" class="form-fields inactive"> 
        <label for="" class="plugin">{{ 'PUBLISH' | renameWorkflow }} <input type="checkbox" /></label>
      </div>

       <!-- LINK CHECKING -->
      <div id="linkchecking" class="form-fields inactive"> 
        <label for="" class="plugin">{{ 'LINK_CHECKING' | renameWorkflow }} <input type="checkbox" /></label>
      </div>

      <div class="form-fields form-fields-buttons">  
        <div class="form-group form-group-btns user-profile-edit-btns">
          <button class="submit" type="button" (click)="onSubmit()" [disabled]="!workflowForm.valid">{{ 'save' | translate }}</button>
        </div>
      </div>
    </div>
    
  </form>
</div>
